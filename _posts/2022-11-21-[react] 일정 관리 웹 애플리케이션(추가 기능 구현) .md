---
categories: react
---

# 기능 구현

## App에서 todos 상태 사용하기

### App.js 에서 상태 정의

```jsx
// App.js

const App = () => {
  const [todos, setTodos] = useState([
    { id: 1, text: "리액트 공부하기", checked: true },
    { id: 2, text: "자바스크립트 공부하기", checked: true },
    { id: 3, text: "장고 공부하기", checked: false },
  ]);
  return (
    <TodoTemplate>
      <TodoInsert />
      <TodoList todos={todos} />
    </TodoTemplate>
  );
};
export default App;
```

useState를 사용하여 todos라는 상태 정의

todos를 TodoList의 props로 전달

### props를 TodoList.js에서 받기

```jsx
// TodoList.js

import React from "react";
import TodoListItem from "./TodoListItem";
import "./TodoList.scss";

const TodoList = ({ todos }) => {
  return (
    <div className="TodoList">
      {todos.map((todo) => (
        <TodoListItem todo={todo} key={todo.id} />
      ))}
    </div>
  );
};

export default TodoList;
```

props로 받아 온 todos 배열을 내장 함수 map을 통해 TodoListItem으로 이루어진 배열로 변환하여 렌더링.

todo 데이터는 통째로 props로 전달.

여러 종류의 값을 전달하는 경우에는 객체로 통째로 전달하는 것이 성능 최적화에 편리

### props를 TodoListItem.js에서 받기

```jsx
// TodoListItem.js

import React from "react";
import {
  MdCheckBoxOutlineBlank,
  MdCheckBox,
  MdRemoveCircleOutline,
} from "react-icons/md";
import "./TodoListItem.scss";
import cn from "classnames";

const TodoListItem = ({ todo }) => {
  const { text, checked } = todo;
  return (
    <div className="TodoListItem">
      <div className={cn("checkbox", { checked })}>
        {checked ? <MdCheckBox /> : <MdCheckBoxOutlineBlank />}
        <div className="text">{text}</div>
      </div>
      <div className="remove">
        <MdRemoveCircleOutline />
      </div>
    </div>
  );
};

export default TodoListItem;
```

조건부 스타일리을 위해 classnames 사용

TodoListItem 컴포넌트에서 받아 온 todo 값에 따라 제대로 된 UI를 보여 줄 수 있도록 수정

## 항목 추가 기능 구현

### TodoInsert value 상태관리

```jsx
import React, { useCallback, useState } from "react";
import { MdAdd } from "react-icons/md";
import "./TodoInsert.scss";

const TodoInsert = ({ onInsert }) => {
  const [value, setValue] = useState("");
  const onChange = useCallback((e) => {
    setValue(e.target.value);
  }, []);

  const onSubmit = useCallback(
    (e) => {
      onInsert(value);
      setValue("");
      e.preventDefault();
    },
    [onInsert, value]
  );

  return (
    <form className="TodoInsert" onSubmit={onSubmit}>
      <input
        placeholder="할 일을 입력하세요"
        value={value}
        onChange={onChange}
      ></input>
      <button type="submit">
        <MdAdd />
      </button>
    </form>
  );
};

export default TodoInsert;
```

```jsx
import React, { useCallback, useRef, useState } from "react";
import TodoTemplate from "./components/TodoTemplate";
import TodoInsert from "./components/TodoInsert";
import TodoList from "./components/TodoList";

const App = () => {
  const [todos, setTodos] = useState([
    { id: 1, text: "리액트 공부하기", checked: true },
    { id: 2, text: "자바스크립트 공부하기", checked: true },
    { id: 3, text: "장고 공부하기", checked: false },
  ]);

  const nextId = useRef(4);

  const onInsert = useCallback(
    (text) => {
      const todo = {
        id: nextId.current,
        text,
        checked: false,
      };
      setTodos(todos.concat(todo));
      nextId.current += 1;
    },
    [todos]
  );
  return (
    <TodoTemplate>
      <TodoInsert onInsert={onInsert} />
      <TodoList todos={todos} />
    </TodoTemplate>
  );
};
export default App;
```
